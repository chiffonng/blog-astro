---
interface Props {
  class?: string
}

const { class: className } = Astro.props
---

<!-- Responsive search link that adapts to screen size -->
<a
  id='search-trigger'
  href='/search'
  class:list={[
    'flex items-center gap-2 rounded-md border border-border bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground transition-colors text-sm no-underline',
    'px-2 py-1.5 sm:px-3 w-fit',
    'relative',
    className
  ]}
  title='Search'
>
  <span class='i-mingcute:search-2-line flex-shrink-0'></span>

  <span class='md:hidden lg:inline'>Search...</span>
  <kbd class='hidden md:flex'></kbd>
</a>

<script>
  import { modifierKey } from '@/utils/keyboard'

  // Handle keyboard shortcut navigation to search page
  document.addEventListener('DOMContentLoaded', () => {
    const searchTrigger = document.getElementById('search-trigger')
    const kbd = searchTrigger?.querySelector('kbd')

    if (kbd) {
      kbd.textContent = `${modifierKey}K`
    }

    if (searchTrigger) {
      searchTrigger.title = `Search (${modifierKey}K)`
    }

    // TEMP: Handle Cmd+K / Ctrl+K navigation to search page
    document.addEventListener('keydown', (e) => {
      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
        e.preventDefault()
        window.location.href = '/search'
      }
    })
  })
</script>
